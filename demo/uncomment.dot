// Generated with ChatGPT and then edited
// To visualize, use dot or past this diagram into
// https://dreampuf.github.io/GraphvizOnline/

digraph CCommentStripper {
  rankdir=LR;
  node [shape=oval, fontname="Helvetica"];

  START [shape=plaintext];
  code;
  code_char [style="dashed,rounded"];
  slash;
  string;
  escaped;
  literal;
  line_comment;
  block_comment;
  star;

  // Entry
  START -> code [label=""];

  // code
  code -> slash       [label="/"];
  code -> code_char [label="  "];

  // code_char
  code_char -> string [label="\""];
  code_char -> literal [label="\'"];
  code_char -> code [label=" "];

  // slash
  slash -> line_comment [label="/"];
  slash -> block_comment[label="*"];
  slash -> code_char

  // string
  string -> escaped     [label="\\"];
  string -> code        [label="\""];
  string -> string

  // escaped 
  escaped -> string  [label="\"", style="dashed"];
  escaped -> literal [label="'", style="dashed"];

  // literal
  literal -> escaped      [label="\\"];
  literal -> code         [label="\'"];
  literal -> literal

  // line comment
  line_comment -> code [label="newline"];
  line_comment -> line_comment

  // block comment
  block_comment -> star [label="*"];
  block_comment -> block_comment  [label="  "];

  // star (inside block comment)
  star -> code [label="/"];
  star -> block_comment  [label="  "];
}
